ğŸ”§ ä¸€ã€å‡†å¤‡å·¥å…·

	apktool
	ç”¨äºåç¼–è¯‘/å›ç¼–è¯‘ APK çš„èµ„æºæ–‡ä»¶å’Œ smali ä»£ç ã€‚
	ä¸‹è½½åœ°å€ï¼šhttps://ibotpeaches.github.io/Apktool/

	Java JDK
	æä¾› jarsigner æˆ– apksigner è¿›è¡Œç­¾åã€‚

	Android SDK Build-toolsï¼ˆå¯é€‰ï¼‰
	æä¾› zipalign å’Œ apksigner å·¥å…·ã€‚

	åç¼–è¯‘ Java ä»£ç å·¥å…·ï¼ˆå¦‚æœè¦çœ‹é€»è¾‘ï¼Œä¸æ­¢ smaliï¼‰

	jadx-guiï¼ˆæŸ¥çœ‹ Java æºç ï¼Œæ–¹ä¾¿ç†è§£é€»è¾‘ï¼‰

	ä¿®æ”¹å®é™…æ‰§è¡Œä»£ç æ—¶ä»éœ€æ”¹ smaliã€‚

ğŸ“¦ äºŒã€åç¼–è¯‘ APK
	apktool d app.apk -o app_src


	è¯´æ˜ï¼š

	d = decode åç¼–è¯‘

	app.apk = ç›®æ ‡ APK

	-o app_src = è¾“å‡ºç›®å½•

	æ­¤æ—¶ app_src ç›®å½•ç»“æ„å¤§æ¦‚æ˜¯ï¼š

	app_src/
	 â”œâ”€ AndroidManifest.xml
	 â”œâ”€ smali/   (smaliä»£ç )
	 â”œâ”€ res/     (èµ„æºæ–‡ä»¶)
	 â””â”€ ...

âœï¸ ä¸‰ã€ä¿®æ”¹ä»£ç 

	ä¿®æ”¹ Smali ä»£ç 

	APK çš„é€»è¾‘åœ¨ smali/ æ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯ä¸ª .smali å¯¹åº”ä¸€ä¸ª Java ç±»ã€‚

	å¯ä»¥ç”¨ Notepad++ / VS Code æ‰“å¼€æœç´¢è¦æ”¹çš„ç±»ã€‚

	ä¾‹å¦‚ï¼Œæ‰¾åˆ°æŸä¸ªæ–¹æ³•ï¼š

	const-string v0, "Hello"


	æ”¹æˆï¼š

	const-string v0, "World"


	ä¿®æ”¹èµ„æºæ–‡ä»¶

	åœ¨ res/ é‡Œå¯ä»¥æ”¹å¸ƒå±€ XMLã€å›¾ç‰‡ç­‰ã€‚

	ä¿®æ”¹ Manifest

	AndroidManifest.xml å¯æ”¹æƒé™ã€Activity é…ç½®ç­‰ã€‚

ğŸ”¨ å››ã€é‡æ–°æ‰“åŒ…

	ä¿®æ”¹å®Œæˆåå›ç¼–è¯‘ï¼š

	apktool b app_src -o new_app_unsigned.apk


	è¾“å‡ºï¼šnew_app_unsigned.apkï¼ˆæœªç­¾åï¼‰

ğŸ”‘ äº”ã€APK ç­¾å

	Android è¦æ±‚å®‰è£…çš„ APK å¿…é¡»ç­¾åã€‚

	æ–¹å¼1ï¼šä½¿ç”¨ apksignerï¼ˆæ¨èï¼‰
	# å…ˆç”Ÿæˆä¸€ä¸ªæµ‹è¯•ç­¾åï¼ˆåªéœ€è¦ä¸€æ¬¡ï¼‰
	keytool -genkey -v -keystore mykey.keystore -alias mykey -keyalg RSA -keysize 2048 -validity 10000

	# ç­¾å
	apksigner sign --ks mykey.keystore --ks-key-alias mykey new_app_unsigned.apk


	ç­¾å®Œåç”Ÿæˆ new_app_unsigned.apkï¼ˆæ­¤æ—¶å·²å¯å®‰è£…ï¼‰ã€‚

	æ–¹å¼2ï¼šä½¿ç”¨ jarsignerï¼ˆæ—§æ–¹æ³•ï¼‰
	jarsigner -verbose -keystore mykey.keystore new_app_unsigned.apk mykey

ğŸ“ å…­ã€ä¼˜åŒ–å¯¹é½ï¼ˆå¯é€‰ï¼‰

	Google è¦æ±‚ APK å¯¹é½ä»¥æå‡è¿è¡Œæ•ˆç‡ï¼š

	zipalign -v 4 new_app_unsigned.apk new_app_signed.apk


	æœ€ç»ˆäº§ç‰©ï¼šnew_app_signed.apk â†’ å¯ä»¥ç›´æ¥å®‰è£…åˆ°è®¾å¤‡ã€‚




C:\Users\<ä½ çš„ç”¨æˆ·å>\AppData\Local\Android\Sdk\build-tools\<ç‰ˆæœ¬å·>\apksigner.exe
C:\Users\<ä½ çš„ç”¨æˆ·å>\AppData\Local\Android\Sdk\build-tools\<ç‰ˆæœ¬å·>\zipalign.exe

| æ–‡ä»¶                            | ä½œç”¨         | è¯´æ˜                    |
| ----------------------------- | ---------- | --------------------- |
| `tools/build-tools/apksigner` | APK ç­¾åå·¥å…·   | ä» SDK Build-tools ä¸‹å¤åˆ¶ |
| `tools/build-tools/zipalign`  | APK å¯¹é½ä¼˜åŒ–å·¥å…· | åŒä¸Šå¤åˆ¶                  |


1. åç¼–è¯‘
	java -jar tools/apktool/apktool.jar d app.apk -o workspace/app_src
2. å›ç¼–è¯‘
	java -jar tools/apktool/apktool.jar b workspace/app_src -o workspace/new_app_unsigned.apk
3. ç­¾å
	tools/build-tools/apksigner sign --ks mykey.keystore workspace/new_app_unsigned.apk
